{"version":3,"sources":["index.js"],"names":["Element","prototype","remove","parentNode","removeChild","mapboxgl","accessToken","map","Map","container","style","center","zoom","scrollZoom","stores","type","features","geometry","coordinates","properties","phoneFormatted","phone","address","city","country","crossStreet","postalCode","state","cc","addMarkers","forEach","marker","el","document","createElement","id","className","Marker","offset","setLngLat","addTo","addEventListener","e","flyToStore","createPopUp","activeItem","getElementsByClassName","stopPropagation","classList","getElementById","add","buildLocationList","data","store","i","prop","listing","appendChild","link","href","innerHTML","details","length","clickedListing","currentFeature","flyTo","popUps","Popup","closeOnClick","setHTML","on","addSource"],"mappings":"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","file":"src.1aeb0a30.js","sourceRoot":"../src","sourcesContent":["// This will let you use the .remove() function later on\nif (!(\"remove\" in Element.prototype)) {\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\n\nmapboxgl.accessToken =\n  \"pk.eyJ1IjoidGl0b3VhbmNyZWFjaCIsImEiOiJja2hheDd2MnIwa280MnBrNG5wazhmbXY3In0.hIQY0ILrWDV0RVSO5HWcYQ\";\n/**\n * Add the map to the page\n */\nvar map = new mapboxgl.Map({\n  container: \"map\",\n  style: \"mapbox://styles/mapbox/light-v10\",\n  center: [-77.034084142948, 38.909671288923],\n  zoom: 13,\n  scrollZoom: false,\n});\n\nvar stores = {\n  type: \"FeatureCollection\",\n  features: [\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-77.034084142948, 38.909671288923],\n      },\n      properties: {\n        phoneFormatted: \"(202) 234-7336\",\n        phone: \"2022347336\",\n        address: \"1471 P St NW\",\n        city: \"Washington DC\",\n        country: \"United States\",\n        crossStreet: \"at 15th St NW\",\n        postalCode: \"20005\",\n        state: \"D.C.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-77.049766, 38.900772],\n      },\n      properties: {\n        phoneFormatted: \"(202) 507-8357\",\n        phone: \"2025078357\",\n        address: \"2221 I St NW\",\n        city: \"Washington DC\",\n        country: \"United States\",\n        crossStreet: \"at 22nd St NW\",\n        postalCode: \"20037\",\n        state: \"D.C.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-77.043929, 38.910525],\n      },\n      properties: {\n        phoneFormatted: \"(202) 387-9338\",\n        phone: \"2023879338\",\n        address: \"1512 Connecticut Ave NW\",\n        city: \"Washington DC\",\n        country: \"United States\",\n        crossStreet: \"at Dupont Circle\",\n        postalCode: \"20036\",\n        state: \"D.C.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-77.0672, 38.90516896],\n      },\n      properties: {\n        phoneFormatted: \"(202) 337-9338\",\n        phone: \"2023379338\",\n        address: \"3333 M St NW\",\n        city: \"Washington DC\",\n        country: \"United States\",\n        crossStreet: \"at 34th St NW\",\n        postalCode: \"20007\",\n        state: \"D.C.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-77.002583742142, 38.887041080933],\n      },\n      properties: {\n        phoneFormatted: \"(202) 547-9338\",\n        phone: \"2025479338\",\n        address: \"221 Pennsylvania Ave SE\",\n        city: \"Washington DC\",\n        country: \"United States\",\n        crossStreet: \"btwn 2nd & 3rd Sts. SE\",\n        postalCode: \"20003\",\n        state: \"D.C.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-76.933492720127, 38.99225245786],\n      },\n      properties: {\n        address: \"8204 Baltimore Ave\",\n        city: \"College Park\",\n        country: \"United States\",\n        postalCode: \"20740\",\n        state: \"MD\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-77.097083330154, 38.980979],\n      },\n      properties: {\n        phoneFormatted: \"(301) 654-7336\",\n        phone: \"3016547336\",\n        address: \"4831 Bethesda Ave\",\n        cc: \"US\",\n        city: \"Bethesda\",\n        country: \"United States\",\n        postalCode: \"20814\",\n        state: \"MD\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-77.359425054188, 38.958058116661],\n      },\n      properties: {\n        phoneFormatted: \"(571) 203-0082\",\n        phone: \"5712030082\",\n        address: \"11935 Democracy Dr\",\n        city: \"Reston\",\n        country: \"United States\",\n        crossStreet: \"btw Explorer & Library\",\n        postalCode: \"20190\",\n        state: \"VA\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-77.10853099823, 38.880100922392],\n      },\n      properties: {\n        phoneFormatted: \"(703) 522-2016\",\n        phone: \"7035222016\",\n        address: \"4075 Wilson Blvd\",\n        city: \"Arlington\",\n        country: \"United States\",\n        crossStreet: \"at N Randolph St.\",\n        postalCode: \"22203\",\n        state: \"VA\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-75.28784, 40.008008],\n      },\n      properties: {\n        phoneFormatted: \"(610) 642-9400\",\n        phone: \"6106429400\",\n        address: \"68 Coulter Ave\",\n        city: \"Ardmore\",\n        country: \"United States\",\n        postalCode: \"19003\",\n        state: \"PA\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-75.20121216774, 39.954030175164],\n      },\n      properties: {\n        phoneFormatted: \"(215) 386-1365\",\n        phone: \"2153861365\",\n        address: \"3925 Walnut St\",\n        city: \"Philadelphia\",\n        country: \"United States\",\n        postalCode: \"19104\",\n        state: \"PA\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [-77.043959498405, 38.903883387232],\n      },\n      properties: {\n        phoneFormatted: \"(202) 331-3355\",\n        phone: \"2023313355\",\n        address: \"1901 L St. NW\",\n        city: \"Washington DC\",\n        country: \"United States\",\n        crossStreet: \"at 19th St\",\n        postalCode: \"20036\",\n        state: \"D.C.\",\n      },\n    },\n  ],\n};\n\n/**\n * Assign a unique id to each store. You'll use this `id`\n * later to associate each point on the map with a listing\n * in the sidebar.\n */\nstores.features.forEach(function (store, i) {\n  store.properties.id = i;\n});\n\n/**\n * Wait until the map loads to make changes to the map.\n */\nmap.on(\"load\", function (e) {\n  /**\n   * This is where your '.addLayer()' used to be, instead\n   * add only the source without styling a layer\n   */\n  map.addSource(\"places\", {\n    type: \"geojson\",\n    data: stores,\n  });\n\n  /**\n   * Add all the things to the page:\n   * - The location listings on the side of the page\n   * - The markers onto the map\n   */\n  buildLocationList(stores);\n  addMarkers();\n});\n\n/**\n * Add a marker to the map for every store listing.\n **/\nfunction addMarkers() {\n  /* For each feature in the GeoJSON object above: */\n  stores.features.forEach(function (marker) {\n    /* Create a div element for the marker. */\n    var el = document.createElement(\"div\");\n    /* Assign a unique `id` to the marker. */\n    el.id = \"marker-\" + marker.properties.id;\n    /* Assign the `marker` class to each marker for styling. */\n    el.className = \"marker\";\n\n    /**\n     * Create a marker using the div element\n     * defined above and add it to the map.\n     **/\n    new mapboxgl.Marker(el, { offset: [0, -23] })\n      .setLngLat(marker.geometry.coordinates)\n      .addTo(map);\n\n    /**\n     * Listen to the element and when it is clicked, do three things:\n     * 1. Fly to the point\n     * 2. Close all other popups and display popup for clicked store\n     * 3. Highlight listing in sidebar (and remove highlight for all other listings)\n     **/\n    el.addEventListener(\"click\", function (e) {\n      /* Fly to the point */\n      flyToStore(marker);\n      /* Close all other popups and display popup for clicked store */\n      createPopUp(marker);\n      /* Highlight listing in sidebar */\n      var activeItem = document.getElementsByClassName(\"active\");\n      e.stopPropagation();\n      if (activeItem[0]) {\n        activeItem[0].classList.remove(\"active\");\n      }\n      var listing = document.getElementById(\"listing-\" + marker.properties.id);\n      listing.classList.add(\"active\");\n    });\n  });\n}\n\n/**\n * Add a listing for each store to the sidebar.\n **/\nfunction buildLocationList(data) {\n  data.features.forEach(function (store, i) {\n    /**\n     * Create a shortcut for `store.properties`,\n     * which will be used several times below.\n     **/\n    var prop = store.properties;\n\n    /* Add a new listing section to the sidebar. */\n    var listings = document.getElementById(\"listings\");\n    var listing = listings.appendChild(document.createElement(\"div\"));\n    /* Assign a unique `id` to the listing. */\n    listing.id = \"listing-\" + prop.id;\n    /* Assign the `item` class to each listing for styling. */\n    listing.className = \"item\";\n\n    /* Add the link to the individual listing created above. */\n    var link = listing.appendChild(document.createElement(\"a\"));\n    link.href = \"#\";\n    link.className = \"title\";\n    link.id = \"link-\" + prop.id;\n    link.innerHTML = prop.address;\n\n    /* Add details to the individual listing. */\n    var details = listing.appendChild(document.createElement(\"div\"));\n    details.innerHTML = prop.city;\n    if (prop.phone) {\n      details.innerHTML += \" Â· \" + prop.phoneFormatted;\n    }\n\n    /**\n     * Listen to the element and when it is clicked, do four things:\n     * 1. Update the `currentFeature` to the store associated with the clicked link\n     * 2. Fly to the point\n     * 3. Close all other popups and display popup for clicked store\n     * 4. Highlight listing in sidebar (and remove highlight for all other listings)\n     **/\n    link.addEventListener(\"click\", function (e) {\n      for (var i = 0; i < data.features.length; i++) {\n        if (this.id === \"link-\" + data.features[i].properties.id) {\n          var clickedListing = data.features[i];\n          flyToStore(clickedListing);\n          createPopUp(clickedListing);\n        }\n      }\n      var activeItem = document.getElementsByClassName(\"active\");\n      if (activeItem[0]) {\n        activeItem[0].classList.remove(\"active\");\n      }\n      this.parentNode.classList.add(\"active\");\n    });\n  });\n}\n\n/**\n * Use Mapbox GL JS's `flyTo` to move the camera smoothly\n * a given center point.\n **/\nfunction flyToStore(currentFeature) {\n  map.flyTo({\n    center: currentFeature.geometry.coordinates,\n    zoom: 15,\n  });\n}\n\n/**\n * Create a Mapbox GL JS `Popup`.\n **/\nfunction createPopUp(currentFeature) {\n  var popUps = document.getElementsByClassName(\"mapboxgl-popup\");\n  if (popUps[0]) popUps[0].remove();\n  var popup = new mapboxgl.Popup({ closeOnClick: false })\n    .setLngLat(currentFeature.geometry.coordinates)\n    .setHTML(\n      \"<h3>Sweetgreen</h3>\" +\n        \"<h4>\" +\n        currentFeature.properties.address +\n        \"</h4>\"\n    )\n    .addTo(map);\n}\n"]}